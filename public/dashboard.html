<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Dashboard - API Monitoring System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --dark: #1e293b;
            --dark-2: #334155;
            --light: #f8fafc;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --card-bg: #ffffff;
            --sidebar-bg: #1e293b;
            --sidebar-active: #334155;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --radius-sm: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f1f5f9;
            color: var(--dark);
            line-height: 1.5;
            overflow-x: hidden;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            color: white;
            padding: 25px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: var(--transition);
            z-index: 100;
        }

        .sidebar-header {
            padding: 0 25px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 25px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .logo-text h2 {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .logo-text span {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .nav-menu {
            list-style: none;
            padding: 0 15px;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            font-weight: 500;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--sidebar-active);
            color: white;
        }

        .nav-link i {
            width: 20px;
            text-align: center;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--primary);
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.75rem;
        }

        .sidebar-footer {
            padding: 25px 25px 0;
            margin-top: auto;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 25px;
            transition: var(--transition);
        }

        /* Top Bar */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--gray-light);
        }

        .page-title h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        .page-title p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .top-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-secondary {
            background: white;
            color: var(--dark);
            border: 1px solid var(--gray-light);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .time-display {
            background: white;
            padding: 10px 20px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
            font-weight: 600;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }

        .grid-col-1 { grid-column: span 1; }
        .grid-col-2 { grid-column: span 2; }
        .grid-col-3 { grid-column: span 3; }
        .grid-col-4 { grid-column: span 4; }
        .grid-col-5 { grid-column: span 5; }
        .grid-col-6 { grid-column: span 6; }
        .grid-col-7 { grid-column: span 7; }
        .grid-col-8 { grid-column: span 8; }
        .grid-col-9 { grid-column: span 9; }
        .grid-col-10 { grid-column: span 10; }
        .grid-col-12 { grid-column: span 12; }

        @media (max-width: 1400px) {
            .grid-col-4 { grid-column: span 6; }
            .grid-col-6 { grid-column: span 12; }
        }

        @media (max-width: 1200px) {
            .grid-col-3 { grid-column: span 6; }
            .grid-col-4 { grid-column: span 12; }
        }

        @media (max-width: 768px) {
            .grid-col-3,
            .grid-col-6 { grid-column: span 12; }
            
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content.active {
                margin-left: 280px;
            }
            
            .mobile-toggle {
                display: block;
            }
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            height: 100%;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        .card-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: 1px solid var(--gray-light);
            background: white;
            color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .card-action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
        }

        .stat-card.cpu { border-left-color: var(--info); }
        .stat-card.memory { border-left-color: var(--success); }
        .stat-card.disk { border-left-color: var(--warning); }
        .stat-card.network { border-left-color: var(--secondary); }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .stat-title {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 0.85rem;
            padding: 3px 8px;
            border-radius: 20px;
            display: inline-block;
        }

        .stat-change.positive {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .stat-change.negative {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        /* Progress Bars */
        .progress-container {
            margin-top: 10px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .progress-bar {
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 1s ease;
        }

        /* System Monitor */
        .monitor-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .gauge {
            background: white;
            padding: 20px;
            border-radius: var(--radius-sm);
            text-align: center;
            border: 1px solid var(--gray-light);
        }

        .gauge-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        .gauge-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* API Usage */
        .usage-chart {
            height: 200px;
            position: relative;
            margin-top: 20px;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        /* Activity Log */
        .activity-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            transition: var(--transition);
        }

        .activity-item:hover {
            background: var(--light);
        }

        .activity-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .activity-time {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .activity-status {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        /* AI Chat */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 400px;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 15px;
        }

        .model-selector {
            display: flex;
            gap: 8px;
        }

        .model-btn {
            padding: 8px 15px;
            border: 1px solid var(--gray-light);
            background: white;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .model-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: var(--light);
            border-radius: var(--radius-sm);
            margin-bottom: 15px;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            max-width: 85%;
        }

        .message.user {
            margin-left: auto;
            flex-direction: row-reverse;
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .message.user .message-content {
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message.ai .message-content {
            background: white;
            color: var(--dark);
            border: 1px solid var(--gray-light);
            border-bottom-left-radius: 5px;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input textarea {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            resize: none;
            font-size: 0.95rem;
        }

        .chat-input textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Social Media Downloader */
        .downloader {
            background: white;
            border-radius: var(--radius-sm);
            padding: 20px;
            border: 1px solid var(--gray-light);
        }

        .url-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .url-input input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
        }

        .url-input input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .download-result {
            background: var(--light);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .media-preview {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .thumbnail {
            width: 150px;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            background: var(--gray-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .download-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .download-option {
            background: white;
            padding: 15px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
            text-align: center;
            transition: var(--transition);
        }

        .download-option:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        /* Endpoint Monitor */
        .endpoint-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .endpoint-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
            transition: var(--transition);
        }

        .endpoint-item:hover {
            border-color: var(--primary);
        }

        .endpoint-method {
            padding: 5px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            min-width: 70px;
            text-align: center;
        }

        .method-get { background: var(--success); }
        .method-post { background: var(--info); }
        .method-put { background: var(--warning); }
        .method-delete { background: var(--danger); }

        .endpoint-info {
            flex: 1;
        }

        .endpoint-path {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--dark);
        }

        .endpoint-stats {
            display: flex;
            gap: 20px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 25px;
            margin-top: 40px;
            border-top: 1px solid var(--gray-light);
            color: var(--gray);
            font-size: 0.9rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 15px 0;
        }

        .footer-link {
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--primary);
        }

        /* Responsive */
        .mobile-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 101;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            width: 40px;
            height: 40px;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            .mobile-toggle {
                display: flex;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .top-actions {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .time-display {
                width: 100%;
                text-align: center;
            }
        }

        /* Loading */
        .loader {
            border: 3px solid var(--gray-light);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Mobile Toggle -->
    <button class="mobile-toggle" id="mobileToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-server"></i>
                </div>
                <div class="logo-text">
                    <h2>API Dashboard</h2>
                    <span>v3.2.0</span>
                </div>
            </div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <a href="#" class="nav-link active">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                    <span class="nav-badge">Live</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="scrollToSection('aiChat')">
                    <i class="fas fa-robot"></i>
                    <span>AI Chat</span>
                    <span class="nav-badge">3 Models</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="scrollToSection('downloader')">
                    <i class="fas fa-download"></i>
                    <span>Downloader</span>
                    <span class="nav-badge">2 Platforms</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="scrollToSection('endpoints')">
                    <i class="fas fa-code"></i>
                    <span>API Endpoints</span>
                    <span class="nav-badge">10+</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="scrollToSection('monitor')">
                    <i class="fas fa-chart-line"></i>
                    <span>System Monitor</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="scrollToSection('activity')">
                    <i class="fas fa-history"></i>
                    <span>Activity Log</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="/api/info" target="_blank" class="nav-link">
                    <i class="fas fa-book"></i>
                    <span>Documentation</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="/api/health" target="_blank" class="nav-link">
                    <i class="fas fa-heartbeat"></i>
                    <span>Health Check</span>
                </a>
            </li>
        </ul>

        <div class="sidebar-footer">
            <div class="server-status">
                <div class="status-indicator" id="serverStatus"></div>
                <div>
                    <div style="font-weight: 600;">Server Status</div>
                    <div style="font-size: 0.85rem; opacity: 0.8;" id="serverUptime">Loading...</div>
                </div>
            </div>
            <div style="margin-top: 15px; font-size: 0.8rem; opacity: 0.7; text-align: center;">
                © 2024 API Server v3.2.0
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="page-title">
                <h1>Live Dashboard</h1>
                <p>Real-time monitoring & management for API Server</p>
            </div>
            <div class="top-actions">
                <div class="time-display">
                    <i class="fas fa-clock"></i>
                    <span id="currentTime">Loading...</span>
                </div>
                <button class="btn btn-secondary" onclick="refreshDashboard()">
                    <i class="fas fa-sync-alt"></i>
                    <span>Refresh</span>
                </button>
                <button class="btn btn-primary" onclick="location.href='index.html'">
                    <i class="fas fa-home"></i>
                    <span>Back to Home</span>
                </button>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Stats Overview -->
            <div class="card grid-col-12">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <span>System Overview</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="refreshStats()" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats will be loaded here -->
                    <div class="loader"></div>
                </div>
            </div>

            <!-- System Monitor -->
            <div class="card grid-col-6" id="monitor">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <span>System Monitor</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="refreshMonitor()" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="monitor-grid" id="monitorGrid">
                    <!-- Monitor data will be loaded here -->
                    <div class="loader"></div>
                </div>
                <div class="progress-container" style="margin-top: 20px;">
                    <div class="progress-label">
                        <span>System Load</span>
                        <span id="systemLoad">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="systemLoadBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- API Usage -->
            <div class="card grid-col-6">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-plug"></i>
                        </div>
                        <span>API Usage</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" title="View Details">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="usage-chart" id="usageChart">
                    <!-- Chart will be rendered here -->
                    <div style="text-align: center; padding: 50px 0;">
                        <div class="loader"></div>
                        <p style="margin-top: 15px; color: var(--gray);">Loading usage data...</p>
                    </div>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--success);"></div>
                        <span>Successful</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--warning);"></div>
                        <span>Warning</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--danger);"></div>
                        <span>Errors</span>
                    </div>
                </div>
            </div>

            <!-- AI Chat -->
            <div class="card grid-col-6" id="aiChat">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <span>AI Chat Assistant</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="clearChat()" title="Clear Chat">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div class="chat-header">
                    <div class="model-selector">
                        <button class="model-btn active" onclick="setModel('auto')">Auto</button>
                        <button class="model-btn" onclick="setModel('copilot')">Copilot</button>
                        <button class="model-btn" onclick="setModel('deepseek')">Deepseek</button>
                        <button class="model-btn" onclick="setModel('gpt5')">GPT-5</button>
                    </div>
                    <span style="font-size: 0.85rem; color: var(--gray);" id="currentModel">Model: Auto</span>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message ai">
                            <div class="message-content">
                                Hello! I'm your AI assistant. I can help you with questions using multiple AI models. 
                                Select a model above or use "Auto" for automatic selection.
                            </div>
                        </div>
                    </div>
                    <div class="chat-input">
                        <textarea id="aiInput" placeholder="Type your message here..." rows="2"></textarea>
                        <button class="btn btn-primary" onclick="sendAIMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Social Media Downloader -->
            <div class="card grid-col-6" id="downloader">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <span>Social Media Downloader</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="clearDownloader()" title="Clear">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="downloader">
                    <div class="url-input">
                        <input type="text" id="mediaUrl" placeholder="Paste Instagram or Facebook URL here...">
                        <select id="mediaPlatform" style="padding: 0 15px; border: 1px solid var(--gray-light); border-radius: var(--radius-sm);">
                            <option value="auto">Auto Detect</option>
                            <option value="instagram">Instagram</option>
                            <option value="facebook">Facebook</option>
                        </select>
                        <button class="btn btn-primary" onclick="processDownload()">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                    <div class="download-result" id="downloadResult">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- API Endpoints -->
            <div class="card grid-col-6" id="endpoints">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <span>API Endpoints Status</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="testAllEndpoints()" title="Test All">
                            <i class="fas fa-vial"></i>
                        </button>
                    </div>
                </div>
                <div class="endpoint-list" id="endpointList">
                    <!-- Endpoints will be loaded here -->
                    <div class="loader"></div>
                </div>
            </div>

            <!-- Activity Log -->
            <div class="card grid-col-6" id="activity">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <span>Recent Activity</span>
                    </div>
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="clearActivity()" title="Clear Log">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                <div class="activity-list" id="activityList">
                    <!-- Activity will be loaded here -->
                    <div class="activity-item">
                        <div class="activity-icon" style="background: var(--primary);">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Dashboard Loaded</div>
                            <div class="activity-time">Just now</div>
                        </div>
                        <div class="activity-status status-success">Success</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-links">
                <a href="index.html" class="footer-link">Home</a>
                <a href="#" onclick="scrollToSection('aiChat')" class="footer-link">AI Chat</a>
                <a href="#" onclick="scrollToSection('downloader')" class="footer-link">Downloader</a>
                <a href="/api/info" target="_blank" class="footer-link">Documentation</a>
            </div>
            <p>© 2024 API Server Dashboard v3.2.0 | Real-time Monitoring System</p>
            <p style="margin-top: 10px; font-size: 0.8rem;">
                Auto-refresh: <span id="refreshCounter">30</span>s | 
                Last Updated: <span id="lastUpdated">--:--:--</span>
            </p>
        </footer>
    </main>

    <script>
        // Global variables
        let currentModel = 'auto';
        let chatHistory = [];
        let refreshInterval;
        let refreshCounter = 30;
        let activityLog = [];

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Load all data
            loadDashboardData();
            
            // Start auto-refresh
            startAutoRefresh();
            
            // Update time
            updateTime();
            setInterval(updateTime, 1000);
            
            // Update refresh counter
            setInterval(updateRefreshCounter, 1000);
            
            // Setup mobile menu
            document.getElementById('mobileToggle').addEventListener('click', toggleMobileMenu);
            
            // Setup enter key for AI chat
            document.getElementById('aiInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendAIMessage();
                }
            });
            
            // Setup enter key for downloader
            document.getElementById('mediaUrl').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    processDownload();
                }
            });
        });

        // Toggle mobile menu
        function toggleMobileMenu() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('mainContent').classList.toggle('active');
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({
                behavior: 'smooth'
            });
            // Close mobile menu if open
            if (window.innerWidth <= 768) {
                toggleMobileMenu();
            }
        }

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('id-ID', { 
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Update refresh counter
        function updateRefreshCounter() {
            refreshCounter--;
            if (refreshCounter <= 0) {
                refreshCounter = 30;
                refreshDashboard();
            }
            document.getElementById('refreshCounter').textContent = refreshCounter;
        }

        // Start auto-refresh
        function startAutoRefresh() {
            if (refreshInterval) clearInterval(refreshInterval);
            refreshInterval = setInterval(refreshDashboard, 30000);
        }

        // Load dashboard data
        async function loadDashboardData() {
            try {
                // Load server status
                await loadServerStatus();
                
                // Load stats
                await loadStats();
                
                // Load system monitor
                await loadSystemMonitor();
                
                // Load endpoints
                await loadEndpoints();
                
                // Update last updated time
                const now = new Date();
                document.getElementById('lastUpdated').textContent = 
                    now.toLocaleTimeString('id-ID', { hour12: false });
                    
            } catch (error) {
                console.error('Error loading dashboard data:', error);
                addActivity('Error loading dashboard data', 'error');
            }
        }

        // Load server status
        async function loadServerStatus() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                
                if (data.status) {
                    // Update server status indicator
                    document.getElementById('serverStatus').style.background = '#10b981';
                    
                    // Calculate uptime
                    const uptime = data.data.server.uptime;
                    const days = Math.floor(uptime / 86400);
                    const hours = Math.floor((uptime % 86400) / 3600);
                    const minutes = Math.floor((uptime % 3600) / 60);
                    
                    let uptimeText = '';
                    if (days > 0) uptimeText += `${days}d `;
                    if (hours > 0) uptimeText += `${hours}h `;
                    uptimeText += `${minutes}m`;
                    
                    document.getElementById('serverUptime').textContent = `Uptime: ${uptimeText}`;
                    
                    addActivity('Server status updated', 'success');
                }
            } catch (error) {
                document.getElementById('serverStatus').style.background = '#ef4444';
                document.getElementById('serverUptime').textContent = 'Server Offline';
            }
        }

        // Load stats
        async function loadStats() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                
                if (data.status) {
                    const memory = data.data.memory;
                    const memoryPercent = memory.usage_percent;
                    const cpuCores = data.data.server.cpus;
                    const loadAvg = data.data.load[0];
                    const cpuLoad = Math.min(100, (loadAvg / cpuCores) * 100);
                    
                    const statsHTML = `
                        <div class="stat-card cpu">
                            <div class="stat-header">
                                <div class="stat-title">CPU Usage</div>
                                <div class="stat-change ${cpuLoad > 80 ? 'negative' : 'positive'}">
                                    ${cpuLoad > 80 ? 'High' : 'Normal'}
                                </div>
                            </div>
                            <div class="stat-value">${cpuLoad.toFixed(1)}%</div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${cpuLoad}%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card memory">
                            <div class="stat-header">
                                <div class="stat-title">Memory Usage</div>
                                <div class="stat-change ${memoryPercent > 80 ? 'negative' : 'positive'}">
                                    ${memoryPercent > 80 ? 'High' : 'Normal'}
                                </div>
                            </div>
                            <div class="stat-value">${memoryPercent}%</div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${memoryPercent}%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card disk">
                            <div class="stat-header">
                                <div class="stat-title">API Requests</div>
                                <div class="stat-change positive">
                                    +12.5%
                                </div>
                            </div>
                            <div class="stat-value">${Math.floor(Math.random() * 2000)}</div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${Math.random() * 100}%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card network">
                            <div class="stat-header">
                                <div class="stat-title">Response Time</div>
                                <div class="stat-change positive">
                                    Fast
                                </div>
                            </div>
                            <div class="stat-value">${Math.floor(Math.random() * 100)}ms</div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${Math.random() * 100}%"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    document.getElementById('statsGrid').innerHTML = statsHTML;
                    addActivity('System stats updated', 'success');
                }
            } catch (error) {
                document.getElementById('statsGrid').innerHTML = `
                    <div style="text-align: center; padding: 30px; color: var(--gray);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>Failed to load system stats</p>
                    </div>
                `;
            }
        }

        // Load system monitor
        async function loadSystemMonitor() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                
                if (data.status) {
                    const memory = data.data.memory;
                    const memoryPercent = memory.usage_percent;
                    const cpuCores = data.data.server.cpus;
                    const loadAvg = data.data.load[0];
                    const cpuLoad = Math.min(100, (loadAvg / cpuCores) * 100);
                    const networkInterfaces = Object.keys(data.data.network.interfaces).length;
                    
                    const monitorHTML = `
                        <div class="gauge">
                            <div class="gauge-label">CPU Load</div>
                            <div class="gauge-value">${loadAvg.toFixed(2)}</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${cpuLoad}%"></div>
                            </div>
                        </div>
                        
                        <div class="gauge">
                            <div class="gauge-label">Memory Used</div>
                            <div class="gauge-value">${(memory.used / 1024 / 1024 / 1024).toFixed(2)}GB</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${memoryPercent}%"></div>
                            </div>
                        </div>
                        
                        <div class="gauge">
                            <div class="gauge-label">Network</div>
                            <div class="gauge-value">${networkInterfaces}</div>
                            <div class="progress-label">Interfaces Active</div>
                        </div>
                        
                        <div class="gauge">
                            <div class="gauge-label">Platform</div>
                            <div class="gauge-value" style="font-size: 1.5rem;">${data.data.server.platform}</div>
                            <div class="progress-label">${data.data.server.arch}</div>
                        </div>
                    `;
                    
                    document.getElementById('monitorGrid').innerHTML = monitorHTML;
                    document.getElementById('systemLoad').textContent = `${cpuLoad.toFixed(1)}%`;
                    document.getElementById('systemLoadBar').style.width = `${cpuLoad}%`;
                    
                    // Color based on load
                    if (cpuLoad > 80) {
                        document.getElementById('systemLoadBar').style.background = 'var(--danger)';
                    } else if (cpuLoad > 60) {
                        document.getElementById('systemLoadBar').style.background = 'var(--warning)';
                    } else {
                        document.getElementById('systemLoadBar').style.background = 'linear-gradient(135deg, var(--primary), var(--secondary))';
                    }
                }
            } catch (error) {
                console.error('Error loading monitor:', error);
            }
        }

        // Load endpoints
        async function loadEndpoints() {
            const endpoints = [
                { method: 'GET', path: '/api/deepseek', desc: 'Deepseek AI Chat' },
                { method: 'GET', path: '/api/copilot', desc: 'Microsoft Copilot' },
                { method: 'GET', path: '/api/gpt5', desc: 'GPT-5 AI' },
                { method: 'GET', path: '/api/instagram', desc: 'Instagram Downloader' },
                { method: 'GET', path: '/api/facebook', desc: 'Facebook Downloader' },
                { method: 'GET', path: '/api/ai/chat', desc: 'Multi-Model AI' },
                { method: 'GET', path: '/api/social/media', desc: 'Social Media Tools' },
                { method: 'GET', path: '/api/video/download', desc: 'Video Downloader' },
                { method: 'GET', path: '/api/status', desc: 'Server Status' },
                { method: 'GET', path: '/api/health', desc: 'Health Check' }
            ];
            
            let endpointHTML = '';
            
            for (const endpoint of endpoints) {
                // Test each endpoint
                let status = 'unknown';
                let responseTime = '--';
                
                try {
                    const startTime = Date.now();
                    const response = await fetch(endpoint.path);
                    const endTime = Date.now();
                    
                    status = response.status === 200 ? 'healthy' : 'error';
                    responseTime = `${endTime - startTime}ms`;
                } catch (error) {
                    status = 'offline';
                }
                
                endpointHTML += `
                    <div class="endpoint-item">
                        <div class="endpoint-method method-${endpoint.method.toLowerCase()}">
                            ${endpoint.method}
                        </div>
                        <div class="endpoint-info">
                            <div class="endpoint-path">${endpoint.path}</div>
                            <div class="endpoint-stats">
                                <span>Status: 
                                    <span style="color: ${status === 'healthy' ? 'var(--success)' : status === 'error' ? 'var(--warning)' : 'var(--danger)'}">
                                        ${status}
                                    </span>
                                </span>
                                <span>Time: ${responseTime}</span>
                            </div>
                        </div>
                        <button class="card-action-btn" onclick="testEndpoint('${endpoint.path}')" title="Test">
                            <i class="fas fa-vial"></i>
                        </button>
                    </div>
                `;
            }
            
            document.getElementById('endpointList').innerHTML = endpointHTML;
            addActivity('API endpoints tested', 'success');
        }

        // Set AI model
        function setModel(model) {
            currentModel = model;
            
            // Update UI
            document.querySelectorAll('.model-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('currentModel').textContent = `Model: ${model.charAt(0).toUpperCase() + model.slice(1)}`;
            addActivity(`Switched to ${model} model`, 'success');
        }

        // Send AI message
        async function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage('user', message);
            input.value = '';
            
            // Show loading
            const loadingId = 'loading-' + Date.now();
            addMessage('ai', 'Thinking...', loadingId);
            
            try {
                let apiUrl;
                if (currentModel === 'auto') {
                    apiUrl = `/api/ai/chat?text=${encodeURIComponent(message)}&model=auto`;
                } else {
                    apiUrl = `/api/${currentModel === 'deepseek' ? 'deepseek?q=' : currentModel + '?text='}${encodeURIComponent(message)}`;
                }
                
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                // Remove loading message
                document.getElementById(loadingId)?.remove();
                
                // Add AI response
                let aiResponse;
                if (currentModel === 'deepseek') {
                    aiResponse = data.data?.response || data.message;
                } else if (currentModel === 'auto') {
                    aiResponse = data.data?.response || data.result || data.message;
                } else {
                    aiResponse = data.result || data.data?.result || data.message;
                }
                
                addMessage('ai', aiResponse);
                addActivity(`AI ${currentModel} query: "${message.substring(0, 50)}..."`, 'success');
                
                // Save to history
                chatHistory.push({
                    user: message,
                    ai: aiResponse,
                    model: currentModel,
                    timestamp: new Date().toISOString()
                });
                
            } catch (error) {
                document.getElementById(loadingId)?.remove();
                addMessage('ai', `Error: ${error.message}. Please try again.`);
                addActivity('AI chat error', 'error');
            }
        }

        // Add message to chat
        function addMessage(sender, content, id = null) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            if (id) messageDiv.id = id;
            
            messageDiv.innerHTML = `
                <div class="message-content">${content}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return messageDiv;
        }

        // Clear chat
        function clearChat() {
            document.getElementById('chatMessages').innerHTML = `
                <div class="message ai">
                    <div class="message-content">
                        Chat cleared. How can I help you today?
                    </div>
                </div>
            `;
            chatHistory = [];
            addActivity('Chat cleared', 'warning');
        }

        // Process download
        async function processDownload() {
            const urlInput = document.getElementById('mediaUrl');
            const platform = document.getElementById('mediaPlatform').value;
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            
            // Show loading
            const resultDiv = document.getElementById('downloadResult');
            resultDiv.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div class="loader"></div>
                    <p style="margin-top: 10px; color: var(--gray);">Processing...</p>
                </div>
            `;
            resultDiv.style.display = 'block';
            
            try {
                let apiUrl;
                if (platform === 'auto') {
                    if (url.includes('instagram.com')) {
                        apiUrl = `/api/instagram?url=${encodeURIComponent(url)}`;
                    } else if (url.includes('facebook.com') || url.includes('fb.watch')) {
                        apiUrl = `/api/facebook?url=${encodeURIComponent(url)}`;
                    } else {
                        throw new Error('Unsupported URL');
                    }
                } else if (platform === 'instagram') {
                    apiUrl = `/api/instagram?url=${encodeURIComponent(url)}`;
                } else if (platform === 'facebook') {
                    apiUrl = `/api/facebook?url=${encodeURIComponent(url)}`;
                }
                
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data.status) {
                    resultDiv.innerHTML = createDownloadResultHTML(data, platform);
                    addActivity(`Downloaded from ${platform}: ${url.substring(0, 50)}...`, 'success');
                } else {
                    throw new Error(data.message || 'Download failed');
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div style="color: var(--danger); padding: 20px; text-align: center;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Please check the URL and try again.</p>
                    </div>
                `;
                addActivity(`Download failed: ${error.message}`, 'error');
            }
        }

        // Create download result HTML
        function createDownloadResultHTML(data, platform) {
            const result = data.result || data.data;
            
            return `
                <div style="color: var(--success); margin-bottom: 15px;">
                    <i class="fas fa-check-circle"></i>
                    <strong>Successfully fetched ${platform} data</strong>
                </div>
                
                ${result.title ? `<p><strong>Title:</strong> ${result.title}</p>` : ''}
                ${result.durasi ? `<p><strong>Duration:</strong> ${result.durasi}</p>` : ''}
                
                ${result.thumbnail ? `
                    <div class="media-preview">
                        <div class="thumbnail">
                            <img src="${result.thumbnail}" alt="Thumbnail">
                        </div>
                    </div>
                ` : ''}
                
                ${result.download ? `
                    <div style="margin-top: 20px;">
                        <p><strong>Download Options:</strong></p>
                        <div class="download-options">
                            ${result.download.hd ? `
                                <a href="${result.download.hd}" target="_blank" class="download-option">
                                    <i class="fas fa-hd" style="font-size: 1.5rem; margin-bottom: 10px;"></i>
                                    <div>HD Quality</div>
                                    <div style="font-size: 0.8rem; color: var(--gray);">Best Quality</div>
                                </a>
                            ` : ''}
                            
                            ${result.download.sd ? `
                                <a href="${result.download.sd}" target="_blank" class="download-option">
                                    <i class="fas fa-video" style="font-size: 1.5rem; margin-bottom: 10px;"></i>
                                    <div>SD Quality</div>
                                    <div style="font-size: 0.8rem; color: var(--gray);">Standard Quality</div>
                                </a>
                            ` : ''}
                            
                            ${result.download.audio ? `
                                <a href="${result.download.audio}" target="_blank" class="download-option">
                                    <i class="fas fa-music" style="font-size: 1.5rem; margin-bottom: 10px;"></i>
                                    <div>Audio Only</div>
                                    <div style="font-size: 0.8rem; color: var(--gray);">MP3 Format</div>
                                </a>
                            ` : ''}
                        </div>
                    </div>
                ` : ''}
            `;
        }

        // Clear downloader
        function clearDownloader() {
            document.getElementById('mediaUrl').value = '';
            document.getElementById('downloadResult').style.display = 'none';
            addActivity('Downloader cleared', 'warning');
        }

        // Test endpoint
        async function testEndpoint(path) {
            const button = event.target.closest('.card-action-btn');
            const originalHTML = button.innerHTML;
            
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            
            try {
                const startTime = Date.now();
                const response = await fetch(path);
                const endTime = Date.now();
                
                if (response.status === 200) {
                    button.innerHTML = '<i class="fas fa-check" style="color: var(--success);"></i>';
                    addActivity(`Tested ${path}: OK (${endTime - startTime}ms)`, 'success');
                } else {
                    button.innerHTML = '<i class="fas fa-times" style="color: var(--danger);"></i>';
                    addActivity(`Tested ${path}: Error ${response.status}`, 'error');
                }
                
                // Reset after 2 seconds
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                }, 2000);
                
            } catch (error) {
                button.innerHTML = '<i class="fas fa-times" style="color: var(--danger);"></i>';
                addActivity(`Tested ${path}: Failed`, 'error');
                
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                }, 2000);
            }
        }

        // Test all endpoints
        async function testAllEndpoints() {
            const buttons = document.querySelectorAll('.endpoint-item .card-action-btn');
            
            for (const button of buttons) {
                const endpointItem = button.closest('.endpoint-item');
                const path = endpointItem.querySelector('.endpoint-path').textContent;
                
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                
                try {
                    const startTime = Date.now();
                    const response = await fetch(path);
                    const endTime = Date.now();
                    
                    if (response.status === 200) {
                        button.innerHTML = '<i class="fas fa-check" style="color: var(--success);"></i>';
                    } else {
                        button.innerHTML = '<i class="fas fa-times" style="color: var(--danger);"></i>';
                    }
                    
                } catch (error) {
                    button.innerHTML = '<i class="fas fa-times" style="color: var(--danger);"></i>';
                }
            }
            
            addActivity('All endpoints tested', 'success');
            
            // Reset after 3 seconds
            setTimeout(() => {
                buttons.forEach(button => {
                    button.innerHTML = '<i class="fas fa-vial"></i>';
                });
            }, 3000);
        }

        // Add activity
        function addActivity(message, type = 'info') {
            const activityList = document.getElementById('activityList');
            const now = new Date();
            const timeString = now.toLocaleTimeString('id-ID', { 
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            const activity = {
                message,
                type,
                time: timeString,
                timestamp: now.toISOString()
            };
            
            activityLog.unshift(activity);
            if (activityLog.length > 10) activityLog = activityLog.slice(0, 10);
            
            updateActivityList();
        }

        // Update activity list
        function updateActivityList() {
            const activityList = document.getElementById('activityList');
            let activityHTML = '';
            
            for (const activity of activityLog) {
                let icon = 'fas fa-info-circle';
                let iconBg = 'var(--info)';
                let statusClass = 'status-success';
                
                if (activity.type === 'success') {
                    icon = 'fas fa-check-circle';
                    iconBg = 'var(--success)';
                    statusClass = 'status-success';
                } else if (activity.type === 'error') {
                    icon = 'fas fa-times-circle';
                    iconBg = 'var(--danger)';
                    statusClass = 'status-error';
                } else if (activity.type === 'warning') {
                    icon = 'fas fa-exclamation-triangle';
                    iconBg = 'var(--warning)';
                    statusClass = 'status-warning';
                }
                
                activityHTML += `
                    <div class="activity-item">
                        <div class="activity-icon" style="background: ${iconBg};">
                            <i class="${icon}"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">${activity.message}</div>
                            <div class="activity-time">${activity.time}</div>
                        </div>
                        <div class="activity-status ${statusClass}">
                            ${activity.type.charAt(0).toUpperCase() + activity.type.slice(1)}
                        </div>
                    </div>
                `;
            }
            
            activityList.innerHTML = activityHTML;
        }

        // Clear activity
        function clearActivity() {
            activityLog = [];
            updateActivityList();
            addActivity('Activity log cleared', 'warning');
        }

        // Refresh stats
        function refreshStats() {
            loadStats();
            addActivity('Stats refreshed manually', 'success');
        }

        // Refresh monitor
        function refreshMonitor() {
            loadSystemMonitor();
            addActivity('Monitor refreshed', 'success');
        }

        // Refresh dashboard
        async function refreshDashboard() {
            refreshCounter = 30;
            addActivity('Dashboard refresh started', 'info');
            await loadDashboardData();
            addActivity('Dashboard refreshed', 'success');
        }

        // Initial activities
        addActivity('Dashboard initialized', 'success');
        addActivity('Monitoring systems online', 'success');
    </script>
</body>
</html>
